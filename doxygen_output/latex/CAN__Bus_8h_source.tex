\doxysection{CAN\+\_\+\+Bus.\+h}
\hypertarget{CAN__Bus_8h_source}{}\label{CAN__Bus_8h_source}\index{include/CAN\_Bus.h@{include/CAN\_Bus.h}}
\mbox{\hyperlink{CAN__Bus_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifndef\ INC\_CAN\_BUS\_H\_}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ INC\_CAN\_BUS\_H\_}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{/*\ Zephyr-\/Framework\ includes\ */}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <zephyr/drivers/can.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <zephyr/logging/log.h>}}
\DoxyCodeLine{00014\ \textcolor{comment}{/*\ Project\ includes\ */}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{Battery_8h}{Battery.h}}>}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ CAN\_DEVICE\ DT\_LABEL(DT\_NODELABEL(can1))}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{extern}\ \textcolor{keyword}{struct\ }k\_sem\ \mbox{\hyperlink{CAN__Bus_8h_aa7a6b9e51ad63f993e7e9634be15489e}{test\_ack\_sem}};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ TEST\_RXTHREAD\_ID\ 0x7A0}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#define\ ADDR\_ECU\_RX\ 0x410\ }\textcolor{comment}{//\ Address\ used\ ECU\ =>\ CB}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ ADDR\_ECU\_TX\ 0x310\ }\textcolor{comment}{//\ Address\ used\ CB\ =>\ ECU}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ adresses}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_COMMAND\ \ \ 0x411\ \ \ \ \ }\textcolor{comment}{//\ CB\ =>\ ISA}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESPONSE\ \ 0x511\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_I\ \ 0x521\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_U1\ 0x522\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_U2\ 0x523\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_U3\ 0x524\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_T\ \ 0x525\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_W\ \ 0x526\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_AS\ 0x527\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ IVT\_MSG\_RESULT\_WH\ 0x528\ \ \ \ \ }\textcolor{comment}{//\ ISA\ =>\ CB}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{comment}{//\ Muxbyte}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ MUX\_RESULTS\ \ \ \ \ 0x00}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#define\ MUX\_SETCANID\ \ \ \ 0x10}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ MUX\_SETCONFIG\ \ \ 0x20}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#define\ MUX\_SETCOMMAND\ \ 0x30}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#define\ MUX\_GETLOGDATA\ \ 0x40}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\#define\ MUX\_GETCANID\ \ \ \ 0x50}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#define\ MUX\_GETCONFIG\ \ \ 0x60}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#define\ MUX\_GETCOMMAND\ \ 0x70}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#define\ MUX\_RESPLOGDATA\ 0x80}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#define\ MUX\_RESPCANID\ \ \ 0x90}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#define\ MUX\_RESPCONFIG\ \ 0xA0}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#define\ MUX\_RESPSETGET\ \ 0xB0}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#define\ MUX\_NOTALLOWED\ \ 0xFF}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{preprocessor}{\#define\ SET\_MODE\ 0x34}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#define\ ISA\_SERIAL\_NUMBER\ 10139584}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{comment}{//\ channel\ n}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#define\ IVT\_NCURRENT\ 0}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#define\ IVT\_NU1\ 1}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#define\ IVT\_NU2\ 2}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#define\ IVT\_NU3\ 3}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#define\ IVT\_NT\ 4}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#define\ IVT\_NP\ 5}}
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#define\ IVT\_NQ\ 6}}
\DoxyCodeLine{00070\ \textcolor{preprocessor}{\#define\ IVT\_NE\ 7}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{comment}{//\ operating\ mode}}
\DoxyCodeLine{00073\ \textcolor{preprocessor}{\#define\ DISABLED\ 0}}
\DoxyCodeLine{00074\ \textcolor{preprocessor}{\#define\ TRIGGERED\ 1}}
\DoxyCodeLine{00075\ \textcolor{preprocessor}{\#define\ CYCLIC\ 2}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{comment}{//\ settings}}
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#define\ CYCLETIME\ 100\ \ }\textcolor{comment}{//\ in\ ms}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{comment}{//\ CAN\ send\ data\ frame}}
\DoxyCodeLine{00082\ \textcolor{comment}{//\ 0\ status\ flags}}
\DoxyCodeLine{00083\ \textcolor{comment}{//\ 1\ error\ flags}}
\DoxyCodeLine{00084\ \textcolor{comment}{//\ 2\ HVvoltage\ LOW}}
\DoxyCodeLine{00085\ \textcolor{comment}{//\ 3\ HVvoltage\ HIGH}}
\DoxyCodeLine{00086\ \textcolor{comment}{//\ 4\ HVcurrent}}
\DoxyCodeLine{00087\ \textcolor{comment}{//\ 5\ accu\ temp}}
\DoxyCodeLine{00088\ \textcolor{comment}{//\ 6\ SOC}}
\DoxyCodeLine{00089\ \textcolor{comment}{//\ 7\ reserved}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \textcolor{comment}{//wird\ vermutlich\ nicht\ mehr\ gebraucht}}
\DoxyCodeLine{00092\ \textcolor{comment}{//extern\ CAN\_HandleTypeDef\ hcan1;}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_af3edd29ea29208c6382c65ab3432a2cf}{can\_init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00108\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_a9072758a52bb9e3abffa95c95f00b112}{can\_send\_8bytes}}(uint32\_t\ address,\ uint8\_t\ *TxBuffer);}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00118\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_a12acf8d56fe37b3a0e41d65e623a5222}{can\_send\_ivt\_nbytes}}(uint32\_t\ address,\ uint8\_t\ *TxBuffer,\ uint8\_t\ length);}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00126\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_ad556ff9329f192a859173a4f1c3e0119}{can\_send\_ecu}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_ad8f8973e1390cd3c5cf6754fe36ad4ce}{can\_get\_ecu\_state}}();}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{CAN__Bus_8h_afb8e8566edd5be10e5296c82dce3d5d6}{can\_ivt\_init}}(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
